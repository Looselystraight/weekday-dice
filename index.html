<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wochentag würfeln</title>
  <!-- Social Preview -->
<meta property="og:title" content="Wochentag würfeln" />
<meta property="og:description" content="Klick. Gong. Ein Tag von Montag bis Sonntag." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://looselystraight.github.io/weekday-dice/" />
<meta property="og:image" content="https://looselystraight.github.io/weekday-dice/assets/preview.png?v=1" />
<meta name="twitter:card" content="summary_large_image" />
<link rel="icon" href="https://looselystraight.github.io/weekday-dice/assets/symbol_gold.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&family=Inter:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --tergar-orange:#E28E1B;
      --tergar-orange-600:#C97300;
      --ink:#1f1f1f;
      --paper:#fcfaf6;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 600px at 10% -10%, #fff3e0, var(--paper));
      color:var(--ink); font-family:"Merriweather", serif;
    }
    header{display:flex; justify-content:center; padding:18px 0}
    header img{height:42px; width:auto}
    h1{ text-align:center; font-size:clamp(1.6rem,1.2rem + 1.6vw,2.4rem); margin:0 0 8px}
    .stage{ perspective:1000px; width:260px; height:260px; margin:18px auto 6px auto; }
    .cube{
      width:160px; height:160px; position:relative; margin:50px auto;
      transform-style:preserve-3d; transform: translateZ(-80px) rotateX(-24deg) rotateY(38deg);
      transition: transform 1.2s cubic-bezier(.17,.67,.32,1.28);
    }
    .face{
      position:absolute; width:160px; height:160px; display:flex; align-items:center; justify-content:center;
      font-size:3rem; font-weight:700;
      background:linear-gradient(180deg,#fff,#fff7ea); color:var(--ink);
      border:2px solid rgba(0,0,0,.08); border-radius:24px;
      box-shadow: inset 0 0 0 2px rgba(226,142,27,.25), 0 10px 30px rgba(226,142,27,.15);
    }
    .face::after{
      content:""; position:absolute; inset:10px; border-radius:18px;
      background:url("./assets/symbol_gold.png") center/64px 64px no-repeat, linear-gradient(180deg, rgba(226,142,27,.08), rgba(226,142,27,.04));
      opacity:.28; pointer-events:none;
    }
    .front { transform: rotateY(0deg) translateZ(80px); }
    .back  { transform: rotateY(180deg) translateZ(80px); }
    .right { transform: rotateY(90deg) translateZ(80px); }
    .left  { transform: rotateY(-90deg) translateZ(80px); }
    .top   { transform: rotateX(90deg) translateZ(80px); }
    .bottom{ transform: rotateX(-90deg) translateZ(80px); }

    .controls{ text-align:center; }
    .btn{
      appearance:none; border:none; cursor:pointer;
      padding:12px 18px; border-radius:999px; color:white;
      background:linear-gradient(180deg,var(--tergar-orange),var(--tergar-orange-600));
      font-family:"Inter", system-ui, sans-serif; font-weight:700;
      box-shadow:0 10px 20px rgba(226,142,27,.30), 0 2px 6px rgba(0,0,0,.12);
    }
    .btn:active{ transform:translateY(1px) }
    .hint{ color:#555; margin-top:10px; font-family:"Inter", system-ui, sans-serif; }
    .result{ margin-top:14px; font-size:1.6rem; font-weight:700; text-align:center }
  
    .stage{ position:relative; }
    .sparkles{ position:absolute; left:50%; top:50%; width:0; height:0; pointer-events:none; }
    .sparkles span{
      position:absolute; width:6px; height:6px; background:var(--tergar-orange);
      border-radius:50%; opacity:0; transform:translate(0,0) scale(.7);
      box-shadow:0 0 0 1px rgba(255,255,255,.6) inset;
    }
    .sparkles span:nth-child(1){ --tx:  60px; --ty:   0px; }
    .sparkles span:nth-child(2){ --tx:  42px; --ty:  42px; }
    .sparkles span:nth-child(3){ --tx:   0px; --ty:  60px; }
    .sparkles span:nth-child(4){ --tx: -42px; --ty:  42px; }
    .sparkles span:nth-child(5){ --tx: -60px; --ty:   0px; }
    .sparkles span:nth-child(6){ --tx: -42px; --ty: -42px; }
    .sparkles span:nth-child(7){ --tx:   0px; --ty: -60px; }
    .sparkles span:nth-child(8){ --tx:  42px; --ty: -42px; }
    @keyframes sparklePop{
      0%{ opacity:1; transform:translate(0,0) scale(.7); }
      85%{ opacity:.8; }
      100%{ opacity:0; transform:translate(var(--tx), var(--ty)) scale(1); }
    }
    .sparkles.show span{ animation: sparklePop 700ms ease-out both; }
    .sparkles.show span:nth-child(2){ animation-delay: 20ms; }
    .sparkles.show span:nth-child(3){ animation-delay: 40ms; }
    .sparkles.show span:nth-child(4){ animation-delay: 60ms; }
    .sparkles.show span:nth-child(5){ animation-delay: 80ms; }
    .sparkles.show span:nth-child(6){ animation-delay:100ms; }
    .sparkles.show span:nth-child(7){ animation-delay:120ms; }
    .sparkles.show span:nth-child(8){ animation-delay:140ms; }

  </style>
</head>
<body>
  <header>
    <img src="./assets/symbol_gold.png" alt="Tergar Logo">
  </header>

  <main>
    <h1>Wochentag würfeln</h1>

    <section class="stage">
      <div class="sparkles" aria-hidden="true">        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div id="cube" class="cube" aria-hidden="true">
        <div class="face front">Mo</div>
        <div class="face back">Di</div>
        <div class="face right">Mi</div>
        <div class="face left">Do</div>
        <div class="face top">Fr</div>
        <div class="face bottom">Sa</div>
      </div>
    </section>

    <section class="controls">
      <button id="rollBtn" class="btn">Click</button>
      <p class="hint">Klick. Der Gong ertönt. Ein Tag wird gewählt. Von Montag bis Sonntag.</p>
      <div class="result" aria-live="polite" aria-atomic="true"><span id="resultDay">–</span></div>
      <audio id="gong" preload="auto">
        <source src="./assets/gong.mp3" type="audio/mpeg">
      </audio>
    </section>
  </main>

  <script>
    // Minimal, robust logic. Based on the working V3a pattern.
    const cube = document.getElementById('cube');
    const gong = document.getElementById('gong');
    const result = document.getElementById('resultDay');
    const rollBtn = document.getElementById('rollBtn');

    const days = ['Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag','Sonntag'];
    const orientations = [
      {x:0, y:0},{x:0, y:180},{x:0, y:90},{x:0, y:-90},{x:-90, y:0},{x:90, y:0}
    ];

    function synthGong(){
      try{
        const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const o = ctx.createOscillator(); const g = ctx.createGain();
        o.type='sine'; o.frequency.setValueAtTime(440, ctx.currentTime);
        o.frequency.exponentialRampToValueAtTime(220, ctx.currentTime + 2.5);
        g.gain.setValueAtTime(0.001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.3, ctx.currentTime + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 3.2);
        o.connect(g).connect(ctx.destination); o.start(); o.stop(ctx.currentTime + 3.4);
      }catch(e){}
    }

    function playGong(){
      try{
        gong.pause();
        gong.currentTime = 0;
        const p = gong.play();
        if (p && typeof p.catch === 'function'){ p.catch(() => playFresh()); }
      }catch(e){ playFresh(); }
      function playFresh(){
        try{ new Audio('./assets/gong.mp3').play().catch(()=> synthGong()); }
        catch(e){ synthGong(); }
      }
    }

    function roll(){
      const idx = Math.floor(Math.random()*7);
      const chosen = days[idx];
      const spinsX = 2 + Math.floor(Math.random()*2);
      const spinsY = 2 + Math.floor(Math.random()*3);
      const base = idx===6 ? orientations[Math.floor(Math.random()*6)] : orientations[idx];
      const x = 360*spinsX + base.x;
      const y = 360*spinsY + base.y;
      cube.style.transform = `translateZ(-80px) rotateX(${x}deg) rotateY(${y}deg)`;
      playGong();
      const sp = document.querySelector('.sparkles');
      if (sp){ sp.classList.remove('show'); void sp.offsetWidth; sp.classList.add('show'); }
      setTimeout(()=>{ result.textContent = chosen; }, 900);
    }
    rollBtn.addEventListener('click', roll);
  </script>
</body>
</html>
